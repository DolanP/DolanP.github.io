var p=Object.defineProperty;var M=(s,t,i)=>t in s?p(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var o=(s,t,i)=>M(s,typeof t!="symbol"?t+"":t,i);import"./modulepreload-polyfill-B5Qt9EMX.js";/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const m="168";function g(s,t,i){return Math.max(t,Math.min(i,s))}class d{constructor(t=0,i=0){d.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,h=this.y,e=t.elements;return this.x=e[0]*i+e[3]*h+e[6],this.y=e[1]*i+e[4]*h+e[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this}clampLength(t,i){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(t,Math.min(i,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const h=this.dot(t)/i;return Math.acos(g(h,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,h=this.y-t.y;return i*i+h*h}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,h){return this.x=t.x+(i.x-t.x)*h,this.y=t.y+(i.y-t.y)*h,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const h=Math.cos(i),e=Math.sin(i),n=this.x-t.x,r=this.y-t.y;return this.x=n*h-r*e+t.x,this.y=n*e+r*h+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:m}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=m);class w{constructor(){o(this,"_input",{left:0,right:0});o(this,"direction",0);o(this,"position",new d(0,0));o(this,"score",0)}input(t){this._input=t}step(t){const h=1*Math.PI,e=this._input,n=(e.left+e.right)/2*100,r=(e.right-e.left)*h;this.direction+=r*t,this.position.x+=Math.cos(this.direction)*n*t,this.position.y+=Math.sin(this.direction)*n*t}}class S{constructor(){o(this,"position",new d(0,0));o(this,"marked",!1)}}const a={};window.addEventListener("keydown",s=>{a[s.key]=!0});window.addEventListener("keyup",s=>{a[s.key]=!1});function _(s){let t=0;function i(h){const e=(h-t)/1e3;t=h,s(e),requestAnimationFrame(i)}requestAnimationFrame(i)}let f=[],u=[];function E(s,t){const i={width:25,height:25};s.fillStyle="blue",s.save(),s.translate(t.position.x+i.width/2,t.position.y+i.height/2),s.rotate(t.direction),s.fillRect(-i.width/2,-i.height/2,i.width,i.height),s.strokeStyle="yellow",s.lineWidth=5,s.beginPath(),s.moveTo(0,0),s.lineTo(25,0),s.closePath(),s.stroke(),s.restore()}function T(s,t){const i={width:10,height:10};s.fillStyle="green",s.save(),s.translate(t.position.x+i.width/2,t.position.y+i.height/2),s.fillRect(-i.width/2,-i.height/2,i.width,i.height),s.restore()}function k(s){s.save(),s.fillStyle="#888888",s.fillRect(0,0,c,y),s.restore();for(const t of f)E(s,t);for(const t of u)T(s,t)}const b=1920/1080,y=640,c=y*b;function q(){const s=document.getElementById("app"),t=document.createElement("canvas"),i=t.getContext("2d");if(s.appendChild(t),t.height=y,t.width=c,i===null)throw Error("Could not get context from canvas.");return i}function A(){const s=q(),t=new w;f.push(t);for(let h=0;h<10;++h){const e=new S;e.position.x=Math.random()*c,e.position.y=Math.random()*y,u.push(e)}function i(h){return function(e){h.clearRect(0,0,c,y);for(const n of f){let r=0,x=0;a.q&&(r+=1),a.a&&(r-=1),a.w&&(x+=1),a.s&&(x-=1),n.input({left:r,right:x}),n.step(e);for(const l of u)n.position.distanceToSquared(l.position)<1500&&(l.marked=!0,n.score++);u=u.filter(l=>!l.marked)}k(h)}}_(i(s))}A();
