(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function st(e){e.innerHTML="";const t=document.createElement("div");t.id="examples";for(const n of ot.filter(o=>o.name!=="main-menu")){const o=document.createElement("div");o.innerHTML=n.name,o.addEventListener("click",()=>{history.pushState({state:n.name},""),localStorage.setItem("appState",JSON.stringify({state:n.name})),n.load(e)}),t.appendChild(o)}e.appendChild(t)}var at=`#version 300 es

in vec4 a_position;
in vec4 a_colour;

out vec4 v_colour;

void main() {
  gl_Position = a_position;
  v_colour = a_colour;
}`,ct=`#version 300 es

precision highp float;

in vec4 v_colour;

out vec4 outColour;

uniform float u_time;

void main() {
  float t = u_time / 1000.0;
  float s = (sin(t) / 2.0) + 0.5;
  float c = (cos(t) / 2.0) + 0.5;
  outColour = vec4(
    c / 2.0 + v_colour.x / 2.0,
    s / 2.0 + v_colour.y / 2.0,
    c / 4.0 + s / 4.0 + v_colour.z / 2.0,
    v_colour.w);
}`;/* @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const H=5120,B=5121,W=5122,Y=5123,j=5124,K=5125,X=5126,ft=32819,ut=32820,lt=33635,mt=5131,dt=33640,At=35899,yt=35902,pt=36269,Tt=34042,Ee={};{const e=Ee;e[H]=Int8Array,e[B]=Uint8Array,e[W]=Int16Array,e[Y]=Uint16Array,e[j]=Int32Array,e[K]=Uint32Array,e[X]=Float32Array,e[ft]=Uint16Array,e[ut]=Uint16Array,e[lt]=Uint16Array,e[mt]=Uint16Array,e[dt]=Uint32Array,e[At]=Uint32Array,e[yt]=Uint32Array,e[pt]=Uint32Array,e[Tt]=Uint32Array}function _e(e){if(e instanceof Int8Array)return H;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return B;if(e instanceof Int16Array)return W;if(e instanceof Uint16Array)return Y;if(e instanceof Int32Array)return j;if(e instanceof Uint32Array)return K;if(e instanceof Float32Array)return X;throw new Error("unsupported typed array type")}function ve(e){if(e===Int8Array)return H;if(e===Uint8Array||e===Uint8ClampedArray)return B;if(e===Int16Array)return W;if(e===Uint16Array)return Y;if(e===Int32Array)return j;if(e===Uint32Array)return K;if(e===Float32Array)return X;throw new Error("unsupported typed array type")}function Et(e){const t=Ee[e];if(!t)throw new Error("unknown gl type");return t}const G=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function _t(...e){console.error(...e)}const le=new Map;function Se(e,t){if(!e||typeof e!="object")return!1;let n=le.get(t);n||(n=new WeakMap,le.set(t,n));let o=n.get(e);if(o===void 0){const r=Object.prototype.toString.call(e);o=r.substring(8,r.length-1)===t,n.set(e,o)}return o}function vt(e,t){return typeof WebGLBuffer<"u"&&Se(t,"WebGLBuffer")}function xe(e,t){return typeof WebGLTexture<"u"&&Se(t,"WebGLTexture")}const he=35044,R=34962,St=34963,xt=34660,ht=5120,bt=5121,It=5122,Ft=5123,Nt=5124,Ct=5125,be=5126,Ie={attribPrefix:""};function Rt(e,t,n,o,r){e.bindBuffer(t,n),e.bufferData(t,o,r||he)}function Fe(e,t,n,o){if(vt(e,t))return t;n=n||R;const r=e.createBuffer();return Rt(e,n,r,t,o),r}function Ne(e){return e==="indices"}function Bt(e){return e===Int8Array||e===Uint8Array}function Ut(e){return e.length?e:e.data}const Lt=/coord|texture/i,Mt=/color|colour/i;function Pt(e,t){let n;if(Lt.test(e)?n=2:Mt.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function wt(e,t,n){return e.numComponents||e.size||Pt(t,n||Ut(e).length)}function Ce(e,t){if(G(e))return e;if(G(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?q(e.type):void 0;return n||(Ne(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function Dt(e){return typeof e=="number"?e:e?ve(e):be}function q(e){return typeof e=="number"?Et(e):e||Float32Array}function zt(e,t){return{buffer:t.buffer,numValues:2*3*4,type:Dt(t.type),arrayType:q(t.type)}}function Ot(e,t){const n=t.data||t,o=q(t.type),r=n*o.BYTES_PER_ELEMENT,s=e.createBuffer();return e.bindBuffer(R,s),e.bufferData(R,r,t.drawType||he),{buffer:s,numValues:n,type:ve(o),arrayType:o}}function kt(e,t,n){const o=Ce(t,n);return{arrayType:o.constructor,buffer:Fe(e,o,void 0,t.drawType),type:_e(o),numValues:0}}function $t(e,t){const n={};return Object.keys(t).forEach(function(o){if(!Ne(o)){const r=t[o],s=r.attrib||r.name||r.attribName||Ie.attribPrefix+o;if(r.value){if(!Array.isArray(r.value)&&!G(r.value))throw new Error("array.value is not array or typedarray");n[s]={value:r.value}}else{let a;r.buffer&&r.buffer instanceof WebGLBuffer?a=zt:typeof r=="number"||typeof r.data=="number"?a=Ot:a=kt;const{buffer:i,type:c,numValues:f,arrayType:u}=a(e,r,o),l=r.normalize!==void 0?r.normalize:Bt(u),A=wt(r,o,f);n[s]={buffer:i,numComponents:A,type:c,normalize:l,stride:r.stride||0,offset:r.offset||0,divisor:r.divisor===void 0?void 0:r.divisor,drawType:r.drawType}}}}),e.bindBuffer(R,null),n}function gt(e,t){return t===ht||t===bt?1:t===It||t===Ft?2:t===Nt||t===Ct||t===be?4:0}const g=["position","positions","a_position"];function Vt(e,t){let n,o;for(o=0;o<g.length&&(n=g[o],!(n in t||(n=Ie.attribPrefix+n,n in t)));++o);o===g.length&&(n=Object.keys(t)[0]);const r=t[n];if(!r.buffer)return 1;e.bindBuffer(R,r.buffer);const s=e.getBufferParameter(R,xt);e.bindBuffer(R,null);const a=gt(e,r.type),i=s/a,c=r.numComponents||r.size,f=i/c;if(f%1!==0)throw new Error(`numComponents ${c} not correct for length ${length}`);return f}function J(e,t,n){const o=$t(e,t),r=Object.assign({},n||{});r.attribs=Object.assign({},n?n.attribs:{},o);const s=t.indices;if(s){const a=Ce(s,"indices");r.indices=Fe(e,a,St),r.numElements=a.length,r.elementType=_e(a)}else r.numElements||(r.numElements=Vt(e,r.attribs));return r}function Z(e){return!!e.texStorage2D}const Gt=function(){const e={},t={};function n(o){const r=o.constructor.name;if(!e[r]){for(const s in o)if(typeof o[s]=="number"){const a=t[o[s]];t[o[s]]=a?`${a} | ${s}`:s}e[r]=!0}}return function(r,s){return n(r),t[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}}(),Ht=6406,me=6407,de=6408,Wt=6409,Yt=6410,jt=6402,Kt=34041,Xt=33319,qt=33320,Jt=6403,Zt=36244,Qt=36248,en=36249,tn={};{const e=tn;e[Ht]={numColorComponents:1},e[Wt]={numColorComponents:1},e[Yt]={numColorComponents:2},e[me]={numColorComponents:3},e[de]={numColorComponents:4},e[Jt]={numColorComponents:1},e[Zt]={numColorComponents:1},e[Xt]={numColorComponents:2},e[qt]={numColorComponents:2},e[me]={numColorComponents:3},e[Qt]={numColorComponents:3},e[de]={numColorComponents:4},e[en]={numColorComponents:4},e[jt]={numColorComponents:1},e[Kt]={numColorComponents:2}}const Q=_t;function Re(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const U=33984,M=34962,nn=34963,rn=35713,on=35714,sn=35632,an=35633,cn=35981,Be=35718,fn=35721,un=35971,ln=35382,mn=35396,dn=35398,An=35392,yn=35395,P=5126,Ue=35664,Le=35665,Me=35666,ee=5124,Pe=35667,we=35668,De=35669,ze=35670,Oe=35671,ke=35672,$e=35673,ge=35674,Ve=35675,Ge=35676,pn=35678,Tn=35680,En=35679,_n=35682,vn=35685,Sn=35686,xn=35687,hn=35688,bn=35689,In=35690,Fn=36289,Nn=36292,Cn=36293,te=5125,He=36294,We=36295,Ye=36296,Rn=36298,Bn=36299,Un=36300,Ln=36303,Mn=36306,Pn=36307,wn=36308,Dn=36311,w=3553,D=34067,ne=32879,z=35866,m={};function je(e,t){return m[t].bindPoint}function zn(e,t){return function(n){e.uniform1f(t,n)}}function On(e,t){return function(n){e.uniform1fv(t,n)}}function kn(e,t){return function(n){e.uniform2fv(t,n)}}function $n(e,t){return function(n){e.uniform3fv(t,n)}}function gn(e,t){return function(n){e.uniform4fv(t,n)}}function Ke(e,t){return function(n){e.uniform1i(t,n)}}function Xe(e,t){return function(n){e.uniform1iv(t,n)}}function qe(e,t){return function(n){e.uniform2iv(t,n)}}function Je(e,t){return function(n){e.uniform3iv(t,n)}}function Ze(e,t){return function(n){e.uniform4iv(t,n)}}function Vn(e,t){return function(n){e.uniform1ui(t,n)}}function Gn(e,t){return function(n){e.uniform1uiv(t,n)}}function Hn(e,t){return function(n){e.uniform2uiv(t,n)}}function Wn(e,t){return function(n){e.uniform3uiv(t,n)}}function Yn(e,t){return function(n){e.uniform4uiv(t,n)}}function jn(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function Kn(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Xn(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function qn(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function Jn(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function Zn(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function Qn(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function er(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function tr(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function h(e,t,n,o){const r=je(e,t);return Z(e)?function(s){let a,i;!s||xe(e,s)?(a=s,i=null):(a=s.texture,i=s.sampler),e.uniform1i(o,n),e.activeTexture(U+n),e.bindTexture(r,a),e.bindSampler(n,i)}:function(s){e.uniform1i(o,n),e.activeTexture(U+n),e.bindTexture(r,s)}}function b(e,t,n,o,r){const s=je(e,t),a=new Int32Array(r);for(let i=0;i<r;++i)a[i]=n+i;return Z(e)?function(i){e.uniform1iv(o,a),i.forEach(function(c,f){e.activeTexture(U+a[f]);let u,l;!c||xe(e,c)?(u=c,l=null):(u=c.texture,l=c.sampler),e.bindSampler(n,l),e.bindTexture(s,u)})}:function(i){e.uniform1iv(o,a),i.forEach(function(c,f){e.activeTexture(U+a[f]),e.bindTexture(s,c)})}}m[P]={Type:Float32Array,size:4,setter:zn,arraySetter:On};m[Ue]={Type:Float32Array,size:8,setter:kn,cols:2};m[Le]={Type:Float32Array,size:12,setter:$n,cols:3};m[Me]={Type:Float32Array,size:16,setter:gn,cols:4};m[ee]={Type:Int32Array,size:4,setter:Ke,arraySetter:Xe};m[Pe]={Type:Int32Array,size:8,setter:qe,cols:2};m[we]={Type:Int32Array,size:12,setter:Je,cols:3};m[De]={Type:Int32Array,size:16,setter:Ze,cols:4};m[te]={Type:Uint32Array,size:4,setter:Vn,arraySetter:Gn};m[He]={Type:Uint32Array,size:8,setter:Hn,cols:2};m[We]={Type:Uint32Array,size:12,setter:Wn,cols:3};m[Ye]={Type:Uint32Array,size:16,setter:Yn,cols:4};m[ze]={Type:Uint32Array,size:4,setter:Ke,arraySetter:Xe};m[Oe]={Type:Uint32Array,size:8,setter:qe,cols:2};m[ke]={Type:Uint32Array,size:12,setter:Je,cols:3};m[$e]={Type:Uint32Array,size:16,setter:Ze,cols:4};m[ge]={Type:Float32Array,size:32,setter:jn,rows:2,cols:2};m[Ve]={Type:Float32Array,size:48,setter:Kn,rows:3,cols:3};m[Ge]={Type:Float32Array,size:64,setter:Xn,rows:4,cols:4};m[vn]={Type:Float32Array,size:32,setter:qn,rows:2,cols:3};m[Sn]={Type:Float32Array,size:32,setter:Zn,rows:2,cols:4};m[xn]={Type:Float32Array,size:48,setter:Jn,rows:3,cols:2};m[hn]={Type:Float32Array,size:48,setter:er,rows:3,cols:4};m[bn]={Type:Float32Array,size:64,setter:Qn,rows:4,cols:2};m[In]={Type:Float32Array,size:64,setter:tr,rows:4,cols:3};m[pn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:w};m[Tn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:D};m[En]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:ne};m[_n]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:w};m[Fn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:z};m[Nn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:z};m[Cn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:D};m[Rn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:w};m[Bn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:ne};m[Un]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:D};m[Ln]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:z};m[Mn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:w};m[Pn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:ne};m[wn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:D};m[Dn]={Type:null,size:0,setter:h,arraySetter:b,bindPoint:z};function O(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(M,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||P,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function C(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(M,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||ee,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function k(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(M,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||te,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function re(e,t,n){const o=n.size,r=n.count;return function(s){e.bindBuffer(M,s.buffer);const a=s.size||s.numComponents||o,i=a/r,c=s.type||P,u=m[c].size*a,l=s.normalize||!1,A=s.offset||0,d=u/r;for(let T=0;T<r;++T)e.enableVertexAttribArray(t+T),e.vertexAttribPointer(t+T,i,c,l,u,A+d*T),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+T,s.divisor||0)}}const v={};v[P]={size:4,setter:O};v[Ue]={size:8,setter:O};v[Le]={size:12,setter:O};v[Me]={size:16,setter:O};v[ee]={size:4,setter:C};v[Pe]={size:8,setter:C};v[we]={size:12,setter:C};v[De]={size:16,setter:C};v[te]={size:4,setter:k};v[He]={size:8,setter:k};v[We]={size:12,setter:k};v[Ye]={size:16,setter:k};v[ze]={size:4,setter:C};v[Oe]={size:8,setter:C};v[ke]={size:12,setter:C};v[$e]={size:16,setter:C};v[ge]={size:4,setter:re,count:2};v[Ve]={size:9,setter:re,count:3};v[Ge]={size:16,setter:re,count:4};const nr=/ERROR:\s*\d+:(\d+)/gi;function rr(e,t="",n=0){const o=[...t.matchAll(nr)],r=new Map(o.map((s,a)=>{const i=parseInt(s[1]),c=o[a+1],f=c?c.index:t.length,u=t.substring(s.index,f);return[i-1,u]}));return e.split(`
`).map((s,a)=>{const i=r.get(a);return`${a+1+n}: ${s}${i?`

^^^ ${i}`:""}`}).join(`
`)}const Ae=/^[ \t]*\n/;function Qe(e){let t=0;return Ae.test(e)&&(t=1,e=e.replace(Ae,"")),{lineOffset:t,shaderSource:e}}function or(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function ir(e,t,n,o){if(o=o||Q,!e.getShaderParameter(n,rn)){const s=e.getShaderInfoLog(n),{lineOffset:a,shaderSource:i}=Qe(e.getShaderSource(n)),c=`${rr(i,s,a)}
Error compiling ${Gt(e,t)}: ${s}`;return o(c),c}return""}function oe(e,t,n){let o,r,s;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const f=e;n=f.errorCallback,e=f.attribLocations,o=f.transformFeedbackVaryings,r=f.transformFeedbackMode,s=f.callback}const a=n||Q,i=[],c={errorCallback(f,...u){i.push(f),a(f,...u)},transformFeedbackVaryings:o,transformFeedbackMode:r,callback:s,errors:i};{let f={};Array.isArray(e)?e.forEach(function(u,l){f[u]=t?t[l]:l}):f=e||{},c.attribLocations=f}return c}const sr=["VERTEX_SHADER","FRAGMENT_SHADER"];function ar(e,t){if(t.indexOf("frag")>=0)return sn;if(t.indexOf("vert")>=0)return an}function cr(e,t,n){const o=e.getAttachedShaders(t);for(const r of o)n.has(r)&&e.deleteShader(r);e.deleteProgram(t)}const fr=(e=0)=>new Promise(t=>setTimeout(t,e));function ur(e,t,n){const o=e.createProgram(),{attribLocations:r,transformFeedbackVaryings:s,transformFeedbackMode:a}=oe(n);for(let i=0;i<t.length;++i){let c=t[i];if(typeof c=="string"){const f=Re(c),u=f?f.text:c;let l=e[sr[i]];f&&f.type&&(l=ar(e,f.type)||l),c=e.createShader(l),e.shaderSource(c,Qe(u).shaderSource),e.compileShader(c),e.attachShader(o,c)}}Object.entries(r).forEach(([i,c])=>e.bindAttribLocation(o,c,i));{let i=s;i&&(i.attribs&&(i=i.attribs),Array.isArray(i)||(i=Object.keys(i)),e.transformFeedbackVaryings(o,i,a||cn))}return e.linkProgram(o),o}function lr(e,t,n,o,r){const s=oe(n,o,r),a=new Set(t),i=ur(e,t,s);function c(f,u){const l=dr(f,u,s.errorCallback);return l&&cr(f,u,a),l}if(s.callback){mr(e,i).then(()=>{const f=c(e,i);s.callback(f,f?void 0:i)});return}return c(e,i)?void 0:i}async function mr(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),o=n?(s,a)=>s.getProgramParameter(a,n.COMPLETION_STATUS_KHR):()=>!0;let r=0;do await fr(r),r=1e3/60;while(!o(e,t))}function dr(e,t,n){if(n=n||Q,!e.getProgramParameter(t,on)){const r=e.getProgramInfoLog(t);n(`Error in program linking: ${r}`);const a=e.getAttachedShaders(t).map(i=>ir(e,e.getShaderParameter(i,e.SHADER_TYPE),i,n));return`${r}
${a.filter(i=>i).join(`
`)}`}}function Ar(e,t,n,o,r){return lr(e,t,n,o,r)}function et(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const yr=/(\.|\[|]|\w+)/g,pr=e=>e>="0"&&e<="9";function Tr(e,t,n,o){const r=e.split(yr).filter(i=>i!=="");let s=0,a="";for(;;){const i=r[s++];a+=i;const c=pr(i[0]),f=c?parseInt(i):i;if(c&&(a+=r[s++]),s===r.length){n[f]=t;break}else{const l=r[s++],A=l==="[",d=n[f]||(A?[]:{});n[f]=d,n=d,o[a]=o[a]||function(T){return function(x){tt(T,x)}}(d),a+=l}}}function Er(e,t){let n=0;function o(i,c,f){const u=c.name.endsWith("[0]"),l=c.type,A=m[l];if(!A)throw new Error(`unknown type: 0x${l.toString(16)}`);let d;if(A.bindPoint){const T=n;n+=c.size,u?d=A.arraySetter(e,l,T,f,c.size):d=A.setter(e,l,T,f,c.size)}else A.arraySetter&&u?d=A.arraySetter(e,f):d=A.setter(e,f);return d.location=f,d}const r={},s={},a=e.getProgramParameter(t,Be);for(let i=0;i<a;++i){const c=e.getActiveUniform(t,i);if(et(c))continue;let f=c.name;f.endsWith("[0]")&&(f=f.substr(0,f.length-3));const u=e.getUniformLocation(t,c.name);if(u){const l=o(t,c,u);r[f]=l,Tr(f,l,s,r)}}return r}function _r(e,t){const n={},o=e.getProgramParameter(t,un);for(let r=0;r<o;++r){const s=e.getTransformFeedbackVarying(t,r);n[s.name]={index:r,type:s.type,size:s.size}}return n}function vr(e,t){const n=e.getProgramParameter(t,Be),o=[],r=[];for(let i=0;i<n;++i){r.push(i),o.push({});const c=e.getActiveUniform(t,i);o[i].name=c.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(i){const c=i[0],f=i[1];e.getActiveUniforms(t,r,e[c]).forEach(function(u,l){o[l][f]=u})});const s={},a=e.getProgramParameter(t,ln);for(let i=0;i<a;++i){const c=e.getActiveUniformBlockName(t,i),f={index:e.getUniformBlockIndex(t,c),usedByVertexShader:e.getActiveUniformBlockParameter(t,i,mn),usedByFragmentShader:e.getActiveUniformBlockParameter(t,i,dn),size:e.getActiveUniformBlockParameter(t,i,An),uniformIndices:e.getActiveUniformBlockParameter(t,i,yn)};f.used=f.usedByVertexShader||f.usedByFragmentShader,s[c]=f}return{blockSpecs:s,uniformData:o}}function tt(e,t){for(const n in t){const o=e[n];typeof o=="function"?o(t[n]):tt(e[n],t[n])}}function $(e,...t){const n=e.uniformSetters||e,o=t.length;for(let r=0;r<o;++r){const s=t[r];if(Array.isArray(s)){const a=s.length;for(let i=0;i<a;++i)$(n,s[i])}else for(const a in s){const i=n[a];i&&i(s[a])}}}function Sr(e,t){const n={},o=e.getProgramParameter(t,fn);for(let r=0;r<o;++r){const s=e.getActiveAttrib(t,r);if(et(s))continue;const a=e.getAttribLocation(t,s.name),i=v[s.type],c=i.setter(e,a,i);c.location=a,n[s.name]=c}return n}function xr(e,t){for(const n in t){const o=e[n];o&&o(t[n])}}function ie(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(xr(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(nn,n.indices))}function ye(e,t){const n=Er(e,t),o=Sr(e,t),r={program:t,uniformSetters:n,attribSetters:o};return Z(e)&&(r.uniformBlockSpec=vr(e,t),r.transformFeedbackInfo=_r(e,t)),r}const hr=/\s|{|}|;/;function se(e,t,n,o,r){const s=oe(n,o,r),a=[];if(t=t.map(function(f){if(!hr.test(f)){const u=Re(f);if(u)f=u.text;else{const l=`no element with id: ${f}`;s.errorCallback(l),a.push(l)}}return f}),a.length)return or(s,"");const i=s.callback;i&&(s.callback=(f,u)=>{i(f,f?void 0:ye(e,u))});const c=Ar(e,t,s);return c?ye(e,c):null}const br=4,pe=5123;function ae(e,t,n,o,r,s){n=n===void 0?br:n;const a=t.indices,i=t.elementType,c=o===void 0?t.numElements:o;r=r===void 0?0:r,i||a?s!==void 0?e.drawElementsInstanced(n,c,i===void 0?pe:t.elementType,r,s):e.drawElements(n,c,i===void 0?pe:t.elementType,r):s!==void 0?e.drawArraysInstanced(n,r,c,s):e.drawArrays(n,r,c)}function ce(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,o=e.clientHeight*t|0;return e.width!==n||e.height!==o?(e.width=n,e.height=o,!0):!1}function fe(e){e.width=window.innerWidth,e.height=window.innerHeight;const t=e.getContext("webgl2");if(t)console.log("WebGL initialized successfully");else throw alert("WebGL not supported"),Error("WebGL not supported");return t}function Ir(e){const t=document.createElement("canvas");e.innerHTML="",e.append(t);const n=fe(t);var o=se(n,[at,ct]);const r={a_position:{numComponents:2,data:new Float32Array([-1,-1,1,-1,1,1,-1,1])},a_colour:{numComponents:3,data:new Float32Array([1,0,0,0,1,0,0,0,1,1,1,1])},indices:{numComponents:3,data:new Uint16Array([0,1,3,1,2,3])}},s=J(n,r);function a(i){ce(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.DEPTH_TEST);const c={u_time:i};n.useProgram(o.program),ie(n,o,s),$(o,c),ae(n,s),requestAnimationFrame(a)}requestAnimationFrame(a)}var Fr=`#version 300 es

in vec4 a_position;
in vec4 a_colour;

uniform mat4 u_matrix;

out vec4 v_colour;

void main() {
  gl_Position = u_matrix * a_position;
  v_colour = a_colour;
}`,Nr=`#version 300 es

precision highp float;

in vec4 v_colour;

out vec4 outColour;

void main() {
  outColour = v_colour;
}`,V=1e-6,Te=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function N(){var e=new Te(16);return Te!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Cr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L(e,t,n){var o=t[0],r=t[1],s=t[2],a=t[3],i=t[4],c=t[5],f=t[6],u=t[7],l=t[8],A=t[9],d=t[10],T=t[11],x=t[12],I=t[13],F=t[14],S=t[15],y=n[0],p=n[1],E=n[2],_=n[3];return e[0]=y*o+p*i+E*l+_*x,e[1]=y*r+p*c+E*A+_*I,e[2]=y*s+p*f+E*d+_*F,e[3]=y*a+p*u+E*T+_*S,y=n[4],p=n[5],E=n[6],_=n[7],e[4]=y*o+p*i+E*l+_*x,e[5]=y*r+p*c+E*A+_*I,e[6]=y*s+p*f+E*d+_*F,e[7]=y*a+p*u+E*T+_*S,y=n[8],p=n[9],E=n[10],_=n[11],e[8]=y*o+p*i+E*l+_*x,e[9]=y*r+p*c+E*A+_*I,e[10]=y*s+p*f+E*d+_*F,e[11]=y*a+p*u+E*T+_*S,y=n[12],p=n[13],E=n[14],_=n[15],e[12]=y*o+p*i+E*l+_*x,e[13]=y*r+p*c+E*A+_*I,e[14]=y*s+p*f+E*d+_*F,e[15]=y*a+p*u+E*T+_*S,e}function Rr(e,t,n){var o=Math.sin(n),r=Math.cos(n),s=t[0],a=t[1],i=t[2],c=t[3],f=t[4],u=t[5],l=t[6],A=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*r+f*o,e[1]=a*r+u*o,e[2]=i*r+l*o,e[3]=c*r+A*o,e[4]=f*r-s*o,e[5]=u*r-a*o,e[6]=l*r-i*o,e[7]=A*r-c*o,e}function Br(e,t){var n=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ur(e,t,n,o,r){var s=1/Math.tan(t/2),a;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,r!=null&&r!==1/0?(a=1/(o-r),e[10]=(r+o)*a,e[14]=2*r*o*a):(e[10]=-1,e[14]=-2*o),e}var nt=Ur;function rt(e,t,n,o){var r,s,a,i,c,f,u,l,A,d,T=t[0],x=t[1],I=t[2],F=o[0],S=o[1],y=o[2],p=n[0],E=n[1],_=n[2];return Math.abs(T-p)<V&&Math.abs(x-E)<V&&Math.abs(I-_)<V?Cr(e):(u=T-p,l=x-E,A=I-_,d=1/Math.hypot(u,l,A),u*=d,l*=d,A*=d,r=S*A-y*l,s=y*u-F*A,a=F*l-S*u,d=Math.hypot(r,s,a),d?(d=1/d,r*=d,s*=d,a*=d):(r=0,s=0,a=0),i=l*a-A*s,c=A*r-u*a,f=u*s-l*r,d=Math.hypot(i,c,f),d?(d=1/d,i*=d,c*=d,f*=d):(i=0,c=0,f=0),e[0]=r,e[1]=i,e[2]=u,e[3]=0,e[4]=s,e[5]=c,e[6]=l,e[7]=0,e[8]=a,e[9]=f,e[10]=A,e[11]=0,e[12]=-(r*T+s*x+a*I),e[13]=-(i*T+c*x+f*I),e[14]=-(u*T+l*x+A*I),e[15]=1,e)}function Lr(e){const t=document.createElement("canvas");e.innerHTML="",e.append(t);const n=fe(t);var o=se(n,[Fr,Nr]);const r={a_position:{numComponents:3,data:new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1])},a_colour:{numComponents:3,data:new Float32Array([0,0,0,0,0,1,0,1,0,0,1,1,1,0,0,1,0,1,1,1,0,1,1,1])},indices:{numComponents:3,data:new Uint16Array([0,1,3,1,2,3,1,5,2,2,5,6,4,6,5,4,7,6,0,7,4,0,3,7,2,7,3,2,6,7,0,4,5,0,5,1])}},s=J(n,r);function a(i){ce(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE);const c=Math.PI/4,f=t.clientWidth/t.clientHeight,u=.1,l=100,A=N();nt(A,c,f,u,l);const d=i/1e3,T=new Float32Array([6,0,6]),x=new Float32Array([0,0,0]),I=new Float32Array([0,1,0]),F=N();rt(F,T,x,I);const S=N();Br(S,-d),Rr(S,S,-d);const y=N();L(F,F,S),L(y,A,F);const p={u_matrix:y,u_time:i};n.useProgram(o.program),ie(n,o,s),$(o,p),ae(n,s),requestAnimationFrame(a)}requestAnimationFrame(a)}var Mr=`#version 300 es

in vec4 a_position;
in vec4 a_colour;

uniform mat4 u_matrix;

out vec4 v_colour;

void main() {
  gl_Position = u_matrix * a_position;
  v_colour = vec4(0, 0, 0, 1);
}`,Pr=`#version 300 es

precision highp float;

in vec4 v_colour;

out vec4 outColour;

void main() {
  outColour = v_colour;
}`;function wr(e,t,n,o){const r=[],s=[],a=(i,c)=>i+(t+1)*c;for(let i=0;i<e+1;++i)for(let c=0;c<t+1;++c)r.push(c/t*o-o/2,0,i/e*n-n/2),c!==t&&i!==e&&s.push(a(c,i),a(c+1,i),a(c+1,i),a(c,i+1),a(c,i+1),a(c,i),a(c+1,i),a(c+1,i+1),a(c+1,i+1),a(c,i+1),a(c,i+1),a(c+1,i));return{a_position:{numComponents:3,data:new Float32Array(r)},indices:{numComponents:2,data:new Uint16Array(s)}}}function Dr(e){const t=document.createElement("canvas");e.innerHTML="",e.append(t);const n=fe(t);var o=se(n,[Mr,Pr]);const r=64,s=10,a=wr(r,r,s,s),i=J(n,a),c=Math.PI/4,f=t.clientWidth/t.clientHeight,u=.1,l=100,A=N();nt(A,c,f,u,l),n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE);function d(T){ce(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clear(n.COLOR_BUFFER_BIT);const x=new Float32Array([0,10,10]),I=new Float32Array([0,0,0]),F=new Float32Array([0,1,0]),S=N();rt(S,x,I,F);const y=N(),p=N();L(S,S,y),L(p,A,S);const E={u_matrix:p,u_time:T};n.useProgram(o.program),ie(n,o,i),$(o,E),ae(n,i,n.LINES),requestAnimationFrame(d)}requestAnimationFrame(d)}const ot=[{name:"main-menu",load:st},{name:"example-1",load:Ir},{name:"example-2",load:Lr},{name:"example-3",load:Dr}],zr=document.getElementById("app");function Or(){const e=localStorage.getItem("appState");return e?JSON.parse(e):null}const it=Or()??{state:"main-menu"};history.replaceState(it,"");function ue(e){const t=ot.find(n=>n.name===e.state);t&&(localStorage.setItem("appState",JSON.stringify({state:t.name})),t==null||t.load(zr))}ue(it);window.addEventListener("popstate",e=>{console.log(e),ue(e.state)});window.addEventListener("keydown",e=>{(e.key==="b"||e.key==="Escape")&&(localStorage.setItem("appState",JSON.stringify({state:"main-menu"})),ue({state:"main-menu"}))});
