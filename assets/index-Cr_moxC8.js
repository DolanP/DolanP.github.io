(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function rt(e){e.innerHTML="";const t=document.createElement("div");t.id="examples";for(const n of tt.filter(o=>o.name!=="main-menu")){const o=document.createElement("div");o.innerHTML=n.name,o.addEventListener("click",()=>{history.pushState({state:n.name},""),localStorage.setItem("appState",JSON.stringify({state:n.name})),n.load(e)}),t.appendChild(o)}e.appendChild(t)}var ot=`#version 300 es

in vec4 a_position;
in vec4 a_colour;

out vec4 v_colour;

void main() {
  gl_Position = a_position;
  v_colour = a_colour;
}`,it=`#version 300 es

precision highp float;

in vec4 v_colour;

out vec4 outColour;

uniform float u_time;

void main() {
  float t = u_time / 1000.0;
  float s = (sin(t) / 2.0) + 0.5;
  float c = (cos(t) / 2.0) + 0.5;
  outColour = vec4(
    c / 2.0 + v_colour.x / 2.0,
    s / 2.0 + v_colour.y / 2.0,
    c / 4.0 + s / 4.0 + v_colour.z / 2.0,
    v_colour.w);
}`;/* @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const G=5120,B=5121,g=5122,H=5123,W=5124,Y=5125,K=5126,st=32819,at=32820,ct=33635,ft=5131,ut=33640,lt=35899,mt=35902,dt=36269,At=34042,le={};{const e=le;e[G]=Int8Array,e[B]=Uint8Array,e[g]=Int16Array,e[H]=Uint16Array,e[W]=Int32Array,e[Y]=Uint32Array,e[K]=Float32Array,e[st]=Uint16Array,e[at]=Uint16Array,e[ct]=Uint16Array,e[ft]=Uint16Array,e[ut]=Uint32Array,e[lt]=Uint32Array,e[mt]=Uint32Array,e[dt]=Uint32Array,e[At]=Uint32Array}function me(e){if(e instanceof Int8Array)return G;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return B;if(e instanceof Int16Array)return g;if(e instanceof Uint16Array)return H;if(e instanceof Int32Array)return W;if(e instanceof Uint32Array)return Y;if(e instanceof Float32Array)return K;throw new Error("unsupported typed array type")}function de(e){if(e===Int8Array)return G;if(e===Uint8Array||e===Uint8ClampedArray)return B;if(e===Int16Array)return g;if(e===Uint16Array)return H;if(e===Int32Array)return W;if(e===Uint32Array)return Y;if(e===Float32Array)return K;throw new Error("unsupported typed array type")}function yt(e){const t=le[e];if(!t)throw new Error("unknown gl type");return t}const V=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function Tt(...e){console.error(...e)}const oe=new Map;function Ae(e,t){if(!e||typeof e!="object")return!1;let n=oe.get(t);n||(n=new WeakMap,oe.set(t,n));let o=n.get(e);if(o===void 0){const r=Object.prototype.toString.call(e);o=r.substring(8,r.length-1)===t,n.set(e,o)}return o}function pt(e,t){return typeof WebGLBuffer<"u"&&Ae(t,"WebGLBuffer")}function ye(e,t){return typeof WebGLTexture<"u"&&Ae(t,"WebGLTexture")}const Te=35044,R=34962,Et=34963,St=34660,_t=5120,xt=5121,vt=5122,ht=5123,bt=5124,It=5125,pe=5126,Ee={attribPrefix:""};function Nt(e,t,n,o,r){e.bindBuffer(t,n),e.bufferData(t,o,r||Te)}function Se(e,t,n,o){if(pt(e,t))return t;n=n||R;const r=e.createBuffer();return Nt(e,n,r,t,o),r}function _e(e){return e==="indices"}function Ft(e){return e===Int8Array||e===Uint8Array}function Rt(e){return e.length?e:e.data}const Bt=/coord|texture/i,Ct=/color|colour/i;function Ut(e,t){let n;if(Bt.test(e)?n=2:Ct.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function Dt(e,t,n){return e.numComponents||e.size||Ut(t,n||Rt(e).length)}function xe(e,t){if(V(e))return e;if(V(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?j(e.type):void 0;return n||(_e(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function Pt(e){return typeof e=="number"?e:e?de(e):pe}function j(e){return typeof e=="number"?yt(e):e||Float32Array}function Lt(e,t){return{buffer:t.buffer,numValues:2*3*4,type:Pt(t.type),arrayType:j(t.type)}}function Mt(e,t){const n=t.data||t,o=j(t.type),r=n*o.BYTES_PER_ELEMENT,i=e.createBuffer();return e.bindBuffer(R,i),e.bufferData(R,r,t.drawType||Te),{buffer:i,numValues:n,type:de(o),arrayType:o}}function wt(e,t,n){const o=xe(t,n);return{arrayType:o.constructor,buffer:Se(e,o,void 0,t.drawType),type:me(o),numValues:0}}function zt(e,t){const n={};return Object.keys(t).forEach(function(o){if(!_e(o)){const r=t[o],i=r.attrib||r.name||r.attribName||Ee.attribPrefix+o;if(r.value){if(!Array.isArray(r.value)&&!V(r.value))throw new Error("array.value is not array or typedarray");n[i]={value:r.value}}else{let a;r.buffer&&r.buffer instanceof WebGLBuffer?a=Lt:typeof r=="number"||typeof r.data=="number"?a=Mt:a=wt;const{buffer:s,type:c,numValues:f,arrayType:u}=a(e,r,o),l=r.normalize!==void 0?r.normalize:Ft(u),A=Dt(r,o,f);n[i]={buffer:s,numComponents:A,type:c,normalize:l,stride:r.stride||0,offset:r.offset||0,divisor:r.divisor===void 0?void 0:r.divisor,drawType:r.drawType}}}}),e.bindBuffer(R,null),n}function Ot(e,t){return t===_t||t===xt?1:t===vt||t===ht?2:t===bt||t===It||t===pe?4:0}const O=["position","positions","a_position"];function kt(e,t){let n,o;for(o=0;o<O.length&&(n=O[o],!(n in t||(n=Ee.attribPrefix+n,n in t)));++o);o===O.length&&(n=Object.keys(t)[0]);const r=t[n];if(!r.buffer)return 1;e.bindBuffer(R,r.buffer);const i=e.getBufferParameter(R,St);e.bindBuffer(R,null);const a=Ot(e,r.type),s=i/a,c=r.numComponents||r.size,f=s/c;if(f%1!==0)throw new Error(`numComponents ${c} not correct for length ${length}`);return f}function ve(e,t,n){const o=zt(e,t),r=Object.assign({},n||{});r.attribs=Object.assign({},n?n.attribs:{},o);const i=t.indices;if(i){const a=xe(i,"indices");r.indices=Se(e,a,Et),r.numElements=a.length,r.elementType=me(a)}else r.numElements||(r.numElements=kt(e,r.attribs));return r}function X(e){return!!e.texStorage2D}const $t=function(){const e={},t={};function n(o){const r=o.constructor.name;if(!e[r]){for(const i in o)if(typeof o[i]=="number"){const a=t[o[i]];t[o[i]]=a?`${a} | ${i}`:i}e[r]=!0}}return function(r,i){return n(r),t[i]||(typeof i=="number"?`0x${i.toString(16)}`:i)}}(),Vt=6406,ie=6407,se=6408,Gt=6409,gt=6410,Ht=6402,Wt=34041,Yt=33319,Kt=33320,jt=6403,Xt=36244,qt=36248,Jt=36249,Zt={};{const e=Zt;e[Vt]={numColorComponents:1},e[Gt]={numColorComponents:1},e[gt]={numColorComponents:2},e[ie]={numColorComponents:3},e[se]={numColorComponents:4},e[jt]={numColorComponents:1},e[Xt]={numColorComponents:1},e[Yt]={numColorComponents:2},e[Kt]={numColorComponents:2},e[ie]={numColorComponents:3},e[qt]={numColorComponents:3},e[se]={numColorComponents:4},e[Jt]={numColorComponents:4},e[Ht]={numColorComponents:1},e[Wt]={numColorComponents:2}}const q=Tt;function he(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const C=33984,U=34962,Qt=34963,en=35713,tn=35714,nn=35632,rn=35633,on=35981,be=35718,sn=35721,an=35971,cn=35382,fn=35396,un=35398,ln=35392,mn=35395,D=5126,Ie=35664,Ne=35665,Fe=35666,J=5124,Re=35667,Be=35668,Ce=35669,Ue=35670,De=35671,Pe=35672,Le=35673,Me=35674,we=35675,ze=35676,dn=35678,An=35680,yn=35679,Tn=35682,pn=35685,En=35686,Sn=35687,_n=35688,xn=35689,vn=35690,hn=36289,bn=36292,In=36293,Z=5125,Oe=36294,ke=36295,$e=36296,Nn=36298,Fn=36299,Rn=36300,Bn=36303,Cn=36306,Un=36307,Dn=36308,Pn=36311,P=3553,L=34067,Q=32879,M=35866,m={};function Ve(e,t){return m[t].bindPoint}function Ln(e,t){return function(n){e.uniform1f(t,n)}}function Mn(e,t){return function(n){e.uniform1fv(t,n)}}function wn(e,t){return function(n){e.uniform2fv(t,n)}}function zn(e,t){return function(n){e.uniform3fv(t,n)}}function On(e,t){return function(n){e.uniform4fv(t,n)}}function Ge(e,t){return function(n){e.uniform1i(t,n)}}function ge(e,t){return function(n){e.uniform1iv(t,n)}}function He(e,t){return function(n){e.uniform2iv(t,n)}}function We(e,t){return function(n){e.uniform3iv(t,n)}}function Ye(e,t){return function(n){e.uniform4iv(t,n)}}function kn(e,t){return function(n){e.uniform1ui(t,n)}}function $n(e,t){return function(n){e.uniform1uiv(t,n)}}function Vn(e,t){return function(n){e.uniform2uiv(t,n)}}function Gn(e,t){return function(n){e.uniform3uiv(t,n)}}function gn(e,t){return function(n){e.uniform4uiv(t,n)}}function Hn(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function Wn(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Yn(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function Kn(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function jn(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function Xn(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function qn(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function Jn(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function Zn(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function x(e,t,n,o){const r=Ve(e,t);return X(e)?function(i){let a,s;!i||ye(e,i)?(a=i,s=null):(a=i.texture,s=i.sampler),e.uniform1i(o,n),e.activeTexture(C+n),e.bindTexture(r,a),e.bindSampler(n,s)}:function(i){e.uniform1i(o,n),e.activeTexture(C+n),e.bindTexture(r,i)}}function v(e,t,n,o,r){const i=Ve(e,t),a=new Int32Array(r);for(let s=0;s<r;++s)a[s]=n+s;return X(e)?function(s){e.uniform1iv(o,a),s.forEach(function(c,f){e.activeTexture(C+a[f]);let u,l;!c||ye(e,c)?(u=c,l=null):(u=c.texture,l=c.sampler),e.bindSampler(n,l),e.bindTexture(i,u)})}:function(s){e.uniform1iv(o,a),s.forEach(function(c,f){e.activeTexture(C+a[f]),e.bindTexture(i,c)})}}m[D]={Type:Float32Array,size:4,setter:Ln,arraySetter:Mn};m[Ie]={Type:Float32Array,size:8,setter:wn,cols:2};m[Ne]={Type:Float32Array,size:12,setter:zn,cols:3};m[Fe]={Type:Float32Array,size:16,setter:On,cols:4};m[J]={Type:Int32Array,size:4,setter:Ge,arraySetter:ge};m[Re]={Type:Int32Array,size:8,setter:He,cols:2};m[Be]={Type:Int32Array,size:12,setter:We,cols:3};m[Ce]={Type:Int32Array,size:16,setter:Ye,cols:4};m[Z]={Type:Uint32Array,size:4,setter:kn,arraySetter:$n};m[Oe]={Type:Uint32Array,size:8,setter:Vn,cols:2};m[ke]={Type:Uint32Array,size:12,setter:Gn,cols:3};m[$e]={Type:Uint32Array,size:16,setter:gn,cols:4};m[Ue]={Type:Uint32Array,size:4,setter:Ge,arraySetter:ge};m[De]={Type:Uint32Array,size:8,setter:He,cols:2};m[Pe]={Type:Uint32Array,size:12,setter:We,cols:3};m[Le]={Type:Uint32Array,size:16,setter:Ye,cols:4};m[Me]={Type:Float32Array,size:32,setter:Hn,rows:2,cols:2};m[we]={Type:Float32Array,size:48,setter:Wn,rows:3,cols:3};m[ze]={Type:Float32Array,size:64,setter:Yn,rows:4,cols:4};m[pn]={Type:Float32Array,size:32,setter:Kn,rows:2,cols:3};m[En]={Type:Float32Array,size:32,setter:Xn,rows:2,cols:4};m[Sn]={Type:Float32Array,size:48,setter:jn,rows:3,cols:2};m[_n]={Type:Float32Array,size:48,setter:Jn,rows:3,cols:4};m[xn]={Type:Float32Array,size:64,setter:qn,rows:4,cols:2};m[vn]={Type:Float32Array,size:64,setter:Zn,rows:4,cols:3};m[dn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:P};m[An]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:L};m[yn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:Q};m[Tn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:P};m[hn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:M};m[bn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:M};m[In]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:L};m[Nn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:P};m[Fn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:Q};m[Rn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:L};m[Bn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:M};m[Cn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:P};m[Un]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:Q};m[Dn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:L};m[Pn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:M};function w(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(U,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||D,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function F(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(U,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||J,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function z(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(U,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||Z,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function ee(e,t,n){const o=n.size,r=n.count;return function(i){e.bindBuffer(U,i.buffer);const a=i.size||i.numComponents||o,s=a/r,c=i.type||D,u=m[c].size*a,l=i.normalize||!1,A=i.offset||0,d=u/r;for(let y=0;y<r;++y)e.enableVertexAttribArray(t+y),e.vertexAttribPointer(t+y,s,c,l,u,A+d*y),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+y,i.divisor||0)}}const _={};_[D]={size:4,setter:w};_[Ie]={size:8,setter:w};_[Ne]={size:12,setter:w};_[Fe]={size:16,setter:w};_[J]={size:4,setter:F};_[Re]={size:8,setter:F};_[Be]={size:12,setter:F};_[Ce]={size:16,setter:F};_[Z]={size:4,setter:z};_[Oe]={size:8,setter:z};_[ke]={size:12,setter:z};_[$e]={size:16,setter:z};_[Ue]={size:4,setter:F};_[De]={size:8,setter:F};_[Pe]={size:12,setter:F};_[Le]={size:16,setter:F};_[Me]={size:4,setter:ee,count:2};_[we]={size:9,setter:ee,count:3};_[ze]={size:16,setter:ee,count:4};const Qn=/ERROR:\s*\d+:(\d+)/gi;function er(e,t="",n=0){const o=[...t.matchAll(Qn)],r=new Map(o.map((i,a)=>{const s=parseInt(i[1]),c=o[a+1],f=c?c.index:t.length,u=t.substring(i.index,f);return[s-1,u]}));return e.split(`
`).map((i,a)=>{const s=r.get(a);return`${a+1+n}: ${i}${s?`

^^^ ${s}`:""}`}).join(`
`)}const ae=/^[ \t]*\n/;function Ke(e){let t=0;return ae.test(e)&&(t=1,e=e.replace(ae,"")),{lineOffset:t,shaderSource:e}}function tr(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function nr(e,t,n,o){if(o=o||q,!e.getShaderParameter(n,en)){const i=e.getShaderInfoLog(n),{lineOffset:a,shaderSource:s}=Ke(e.getShaderSource(n)),c=`${er(s,i,a)}
Error compiling ${$t(e,t)}: ${i}`;return o(c),c}return""}function te(e,t,n){let o,r,i;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const f=e;n=f.errorCallback,e=f.attribLocations,o=f.transformFeedbackVaryings,r=f.transformFeedbackMode,i=f.callback}const a=n||q,s=[],c={errorCallback(f,...u){s.push(f),a(f,...u)},transformFeedbackVaryings:o,transformFeedbackMode:r,callback:i,errors:s};{let f={};Array.isArray(e)?e.forEach(function(u,l){f[u]=t?t[l]:l}):f=e||{},c.attribLocations=f}return c}const rr=["VERTEX_SHADER","FRAGMENT_SHADER"];function or(e,t){if(t.indexOf("frag")>=0)return nn;if(t.indexOf("vert")>=0)return rn}function ir(e,t,n){const o=e.getAttachedShaders(t);for(const r of o)n.has(r)&&e.deleteShader(r);e.deleteProgram(t)}const sr=(e=0)=>new Promise(t=>setTimeout(t,e));function ar(e,t,n){const o=e.createProgram(),{attribLocations:r,transformFeedbackVaryings:i,transformFeedbackMode:a}=te(n);for(let s=0;s<t.length;++s){let c=t[s];if(typeof c=="string"){const f=he(c),u=f?f.text:c;let l=e[rr[s]];f&&f.type&&(l=or(e,f.type)||l),c=e.createShader(l),e.shaderSource(c,Ke(u).shaderSource),e.compileShader(c),e.attachShader(o,c)}}Object.entries(r).forEach(([s,c])=>e.bindAttribLocation(o,c,s));{let s=i;s&&(s.attribs&&(s=s.attribs),Array.isArray(s)||(s=Object.keys(s)),e.transformFeedbackVaryings(o,s,a||on))}return e.linkProgram(o),o}function cr(e,t,n,o,r){const i=te(n,o,r),a=new Set(t),s=ar(e,t,i);function c(f,u){const l=ur(f,u,i.errorCallback);return l&&ir(f,u,a),l}if(i.callback){fr(e,s).then(()=>{const f=c(e,s);i.callback(f,f?void 0:s)});return}return c(e,s)?void 0:s}async function fr(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),o=n?(i,a)=>i.getProgramParameter(a,n.COMPLETION_STATUS_KHR):()=>!0;let r=0;do await sr(r),r=1e3/60;while(!o(e,t))}function ur(e,t,n){if(n=n||q,!e.getProgramParameter(t,tn)){const r=e.getProgramInfoLog(t);n(`Error in program linking: ${r}`);const a=e.getAttachedShaders(t).map(s=>nr(e,e.getShaderParameter(s,e.SHADER_TYPE),s,n));return`${r}
${a.filter(s=>s).join(`
`)}`}}function lr(e,t,n,o,r){return cr(e,t,n,o,r)}function je(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const mr=/(\.|\[|]|\w+)/g,dr=e=>e>="0"&&e<="9";function Ar(e,t,n,o){const r=e.split(mr).filter(s=>s!=="");let i=0,a="";for(;;){const s=r[i++];a+=s;const c=dr(s[0]),f=c?parseInt(s):s;if(c&&(a+=r[i++]),i===r.length){n[f]=t;break}else{const l=r[i++],A=l==="[",d=n[f]||(A?[]:{});n[f]=d,n=d,o[a]=o[a]||function(y){return function(h){Xe(y,h)}}(d),a+=l}}}function yr(e,t){let n=0;function o(s,c,f){const u=c.name.endsWith("[0]"),l=c.type,A=m[l];if(!A)throw new Error(`unknown type: 0x${l.toString(16)}`);let d;if(A.bindPoint){const y=n;n+=c.size,u?d=A.arraySetter(e,l,y,f,c.size):d=A.setter(e,l,y,f,c.size)}else A.arraySetter&&u?d=A.arraySetter(e,f):d=A.setter(e,f);return d.location=f,d}const r={},i={},a=e.getProgramParameter(t,be);for(let s=0;s<a;++s){const c=e.getActiveUniform(t,s);if(je(c))continue;let f=c.name;f.endsWith("[0]")&&(f=f.substr(0,f.length-3));const u=e.getUniformLocation(t,c.name);if(u){const l=o(t,c,u);r[f]=l,Ar(f,l,i,r)}}return r}function Tr(e,t){const n={},o=e.getProgramParameter(t,an);for(let r=0;r<o;++r){const i=e.getTransformFeedbackVarying(t,r);n[i.name]={index:r,type:i.type,size:i.size}}return n}function pr(e,t){const n=e.getProgramParameter(t,be),o=[],r=[];for(let s=0;s<n;++s){r.push(s),o.push({});const c=e.getActiveUniform(t,s);o[s].name=c.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(s){const c=s[0],f=s[1];e.getActiveUniforms(t,r,e[c]).forEach(function(u,l){o[l][f]=u})});const i={},a=e.getProgramParameter(t,cn);for(let s=0;s<a;++s){const c=e.getActiveUniformBlockName(t,s),f={index:e.getUniformBlockIndex(t,c),usedByVertexShader:e.getActiveUniformBlockParameter(t,s,fn),usedByFragmentShader:e.getActiveUniformBlockParameter(t,s,un),size:e.getActiveUniformBlockParameter(t,s,ln),uniformIndices:e.getActiveUniformBlockParameter(t,s,mn)};f.used=f.usedByVertexShader||f.usedByFragmentShader,i[c]=f}return{blockSpecs:i,uniformData:o}}function Xe(e,t){for(const n in t){const o=e[n];typeof o=="function"?o(t[n]):Xe(e[n],t[n])}}function ne(e,...t){const n=e.uniformSetters||e,o=t.length;for(let r=0;r<o;++r){const i=t[r];if(Array.isArray(i)){const a=i.length;for(let s=0;s<a;++s)ne(n,i[s])}else for(const a in i){const s=n[a];s&&s(i[a])}}}function Er(e,t){const n={},o=e.getProgramParameter(t,sn);for(let r=0;r<o;++r){const i=e.getActiveAttrib(t,r);if(je(i))continue;const a=e.getAttribLocation(t,i.name),s=_[i.type],c=s.setter(e,a,s);c.location=a,n[i.name]=c}return n}function Sr(e,t){for(const n in t){const o=e[n];o&&o(t[n])}}function qe(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(Sr(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(Qt,n.indices))}function ce(e,t){const n=yr(e,t),o=Er(e,t),r={program:t,uniformSetters:n,attribSetters:o};return X(e)&&(r.uniformBlockSpec=pr(e,t),r.transformFeedbackInfo=Tr(e,t)),r}const _r=/\s|{|}|;/;function Je(e,t,n,o,r){const i=te(n,o,r),a=[];if(t=t.map(function(f){if(!_r.test(f)){const u=he(f);if(u)f=u.text;else{const l=`no element with id: ${f}`;i.errorCallback(l),a.push(l)}}return f}),a.length)return tr(i,"");const s=i.callback;s&&(i.callback=(f,u)=>{s(f,f?void 0:ce(e,u))});const c=lr(e,t,i);return c?ce(e,c):null}const xr=4,fe=5123;function Ze(e,t,n,o,r,i){n=n===void 0?xr:n;const a=t.indices,s=t.elementType,c=o===void 0?t.numElements:o;r=r===void 0?0:r,s||a?i!==void 0?e.drawElementsInstanced(n,c,s===void 0?fe:t.elementType,r,i):e.drawElements(n,c,s===void 0?fe:t.elementType,r):i!==void 0?e.drawArraysInstanced(n,r,c,i):e.drawArrays(n,r,c)}function Qe(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,o=e.clientHeight*t|0;return e.width!==n||e.height!==o?(e.width=n,e.height=o,!0):!1}function et(e){e.width=window.innerWidth,e.height=window.innerHeight;const t=e.getContext("webgl2");if(t)console.log("WebGL initialized successfully");else throw alert("WebGL not supported"),Error("WebGL not supported");return t}function vr(e){const t=document.createElement("canvas");e.innerHTML="",e.append(t);const n=et(t);var o=Je(n,[ot,it]);const r={a_position:{numComponents:2,data:new Float32Array([-1,-1,1,-1,1,1,-1,1])},a_colour:{numComponents:3,data:new Float32Array([1,0,0,0,1,0,0,0,1,1,1,1])},indices:{numComponents:3,data:new Uint16Array([0,1,3,1,2,3])}},i=ve(n,r);function a(s){Qe(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.DEPTH_TEST);const c={u_time:s};n.useProgram(o.program),qe(n,o,i),ne(o,c),Ze(n,i),requestAnimationFrame(a)}requestAnimationFrame(a)}var hr=`#version 300 es

in vec4 a_position;
in vec4 a_colour;

uniform mat4 u_matrix;

out vec4 v_colour;

void main() {
  gl_Position = u_matrix * a_position;
  v_colour = a_colour;
}`,br=`#version 300 es

precision highp float;

in vec4 v_colour;

out vec4 outColour;

void main() {
  outColour = v_colour;
}`,k=1e-6,ue=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function $(){var e=new ue(16);return ue!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Ir(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Nr(e,t,n){var o=t[0],r=t[1],i=t[2],a=t[3],s=t[4],c=t[5],f=t[6],u=t[7],l=t[8],A=t[9],d=t[10],y=t[11],h=t[12],b=t[13],I=t[14],N=t[15],T=n[0],p=n[1],E=n[2],S=n[3];return e[0]=T*o+p*s+E*l+S*h,e[1]=T*r+p*c+E*A+S*b,e[2]=T*i+p*f+E*d+S*I,e[3]=T*a+p*u+E*y+S*N,T=n[4],p=n[5],E=n[6],S=n[7],e[4]=T*o+p*s+E*l+S*h,e[5]=T*r+p*c+E*A+S*b,e[6]=T*i+p*f+E*d+S*I,e[7]=T*a+p*u+E*y+S*N,T=n[8],p=n[9],E=n[10],S=n[11],e[8]=T*o+p*s+E*l+S*h,e[9]=T*r+p*c+E*A+S*b,e[10]=T*i+p*f+E*d+S*I,e[11]=T*a+p*u+E*y+S*N,T=n[12],p=n[13],E=n[14],S=n[15],e[12]=T*o+p*s+E*l+S*h,e[13]=T*r+p*c+E*A+S*b,e[14]=T*i+p*f+E*d+S*I,e[15]=T*a+p*u+E*y+S*N,e}function Fr(e,t,n,o,r){var i=1/Math.tan(t/2),a;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,r!=null&&r!==1/0?(a=1/(o-r),e[10]=(r+o)*a,e[14]=2*r*o*a):(e[10]=-1,e[14]=-2*o),e}var Rr=Fr;function Br(e,t,n,o){var r,i,a,s,c,f,u,l,A,d,y=t[0],h=t[1],b=t[2],I=o[0],N=o[1],T=o[2],p=n[0],E=n[1],S=n[2];return Math.abs(y-p)<k&&Math.abs(h-E)<k&&Math.abs(b-S)<k?Ir(e):(u=y-p,l=h-E,A=b-S,d=1/Math.hypot(u,l,A),u*=d,l*=d,A*=d,r=N*A-T*l,i=T*u-I*A,a=I*l-N*u,d=Math.hypot(r,i,a),d?(d=1/d,r*=d,i*=d,a*=d):(r=0,i=0,a=0),s=l*a-A*i,c=A*r-u*a,f=u*i-l*r,d=Math.hypot(s,c,f),d?(d=1/d,s*=d,c*=d,f*=d):(s=0,c=0,f=0),e[0]=r,e[1]=s,e[2]=u,e[3]=0,e[4]=i,e[5]=c,e[6]=l,e[7]=0,e[8]=a,e[9]=f,e[10]=A,e[11]=0,e[12]=-(r*y+i*h+a*b),e[13]=-(s*y+c*h+f*b),e[14]=-(u*y+l*h+A*b),e[15]=1,e)}function Cr(e){const t=document.createElement("canvas");e.innerHTML="",e.append(t);const n=et(t);var o=Je(n,[hr,br]);const r={a_position:{numComponents:2,data:new Float32Array([-1,-1,1,-1,1,1,-1,1])},a_colour:{numComponents:3,data:new Float32Array([1,0,0,0,1,0,0,0,1,1,1,1])},indices:{numComponents:3,data:new Uint16Array([0,1,3,1,2,3])}},i=ve(n,r);function a(s){Qe(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.DEPTH_TEST);const c=Math.PI/4,f=t.clientWidth/t.clientHeight,u=.1,l=100,A=$();Rr(A,c,f,u,l);const d=new Float32Array([0,0,-6]),y=new Float32Array([0,0,0]),h=new Float32Array([0,1,0]),b=$();Br(b,d,y,h);const I=$();Nr(I,A,b);const N={u_matrix:I,u_time:s};n.useProgram(o.program),qe(n,o,i),ne(o,N),Ze(n,i),requestAnimationFrame(a)}requestAnimationFrame(a)}const tt=[{name:"main-menu",load:rt},{name:"example-1",load:vr},{name:"example-2",load:Cr}],Ur=document.getElementById("app");function Dr(){const e=localStorage.getItem("appState");return e?JSON.parse(e):null}const nt=Dr()??{state:"main-menu"};history.replaceState(nt,"");function re(e){const t=tt.find(n=>n.name===e.state);t&&(localStorage.setItem("appState",JSON.stringify({state:t.name})),t==null||t.load(Ur))}re(nt);window.addEventListener("popstate",e=>{console.log(e),re(e.state)});window.addEventListener("keydown",e=>{(e.key==="b"||e.key==="Escape")&&(localStorage.setItem("appState",JSON.stringify({state:"main-menu"})),re({state:"main-menu"}))});
