(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function ot(e){e.innerHTML="";const t=document.createElement("div");t.id="examples";for(const n of nt.filter(o=>o.name!=="main-menu")){const o=document.createElement("div");o.innerHTML=n.name,o.addEventListener("click",()=>{history.pushState({state:n.name},""),localStorage.setItem("appState",JSON.stringify({state:n.name})),n.load(e)}),t.appendChild(o)}e.appendChild(t)}var it=`#version 300 es

in vec4 a_position;
in vec4 a_colour;

out vec4 v_colour;

void main() {
  gl_Position = a_position;
  v_colour = a_colour;
}`,st=`#version 300 es

precision highp float;

in vec4 v_colour;

out vec4 outColour;

uniform float u_time;

void main() {
  float t = u_time / 1000.0;
  float s = (sin(t) / 2.0) + 0.5;
  float c = (cos(t) / 2.0) + 0.5;
  outColour = vec4(
    c / 2.0 + v_colour.x / 2.0,
    s / 2.0 + v_colour.y / 2.0,
    c / 4.0 + s / 4.0 + v_colour.z / 2.0,
    v_colour.w);
}`;/* @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const G=5120,C=5121,g=5122,H=5123,W=5124,Y=5125,K=5126,at=32819,ct=32820,ft=33635,ut=5131,lt=33640,mt=35899,dt=35902,At=36269,yt=34042,me={};{const e=me;e[G]=Int8Array,e[C]=Uint8Array,e[g]=Int16Array,e[H]=Uint16Array,e[W]=Int32Array,e[Y]=Uint32Array,e[K]=Float32Array,e[at]=Uint16Array,e[ct]=Uint16Array,e[ft]=Uint16Array,e[ut]=Uint16Array,e[lt]=Uint32Array,e[mt]=Uint32Array,e[dt]=Uint32Array,e[At]=Uint32Array,e[yt]=Uint32Array}function de(e){if(e instanceof Int8Array)return G;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return C;if(e instanceof Int16Array)return g;if(e instanceof Uint16Array)return H;if(e instanceof Int32Array)return W;if(e instanceof Uint32Array)return Y;if(e instanceof Float32Array)return K;throw new Error("unsupported typed array type")}function Ae(e){if(e===Int8Array)return G;if(e===Uint8Array||e===Uint8ClampedArray)return C;if(e===Int16Array)return g;if(e===Uint16Array)return H;if(e===Int32Array)return W;if(e===Uint32Array)return Y;if(e===Float32Array)return K;throw new Error("unsupported typed array type")}function Tt(e){const t=me[e];if(!t)throw new Error("unknown gl type");return t}const V=typeof SharedArrayBuffer<"u"?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function pt(...e){console.error(...e)}const oe=new Map;function ye(e,t){if(!e||typeof e!="object")return!1;let n=oe.get(t);n||(n=new WeakMap,oe.set(t,n));let o=n.get(e);if(o===void 0){const r=Object.prototype.toString.call(e);o=r.substring(8,r.length-1)===t,n.set(e,o)}return o}function Et(e,t){return typeof WebGLBuffer<"u"&&ye(t,"WebGLBuffer")}function Te(e,t){return typeof WebGLTexture<"u"&&ye(t,"WebGLTexture")}const pe=35044,R=34962,_t=34963,St=34660,xt=5120,vt=5121,ht=5122,bt=5123,It=5124,Nt=5125,Ee=5126,_e={attribPrefix:""};function Ft(e,t,n,o,r){e.bindBuffer(t,n),e.bufferData(t,o,r||pe)}function Se(e,t,n,o){if(Et(e,t))return t;n=n||R;const r=e.createBuffer();return Ft(e,n,r,t,o),r}function xe(e){return e==="indices"}function Rt(e){return e===Int8Array||e===Uint8Array}function Ct(e){return e.length?e:e.data}const Bt=/coord|texture/i,Ut=/color|colour/i;function Lt(e,t){let n;if(Bt.test(e)?n=2:Ut.test(e)?n=4:n=3,t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function Mt(e,t,n){return e.numComponents||e.size||Lt(t,n||Ct(e).length)}function ve(e,t){if(V(e))return e;if(V(e.data))return e.data;Array.isArray(e)&&(e={data:e});let n=e.type?j(e.type):void 0;return n||(xe(t)?n=Uint16Array:n=Float32Array),new n(e.data)}function Dt(e){return typeof e=="number"?e:e?Ae(e):Ee}function j(e){return typeof e=="number"?Tt(e):e||Float32Array}function Pt(e,t){return{buffer:t.buffer,numValues:2*3*4,type:Dt(t.type),arrayType:j(t.type)}}function wt(e,t){const n=t.data||t,o=j(t.type),r=n*o.BYTES_PER_ELEMENT,i=e.createBuffer();return e.bindBuffer(R,i),e.bufferData(R,r,t.drawType||pe),{buffer:i,numValues:n,type:Ae(o),arrayType:o}}function zt(e,t,n){const o=ve(t,n);return{arrayType:o.constructor,buffer:Se(e,o,void 0,t.drawType),type:de(o),numValues:0}}function Ot(e,t){const n={};return Object.keys(t).forEach(function(o){if(!xe(o)){const r=t[o],i=r.attrib||r.name||r.attribName||_e.attribPrefix+o;if(r.value){if(!Array.isArray(r.value)&&!V(r.value))throw new Error("array.value is not array or typedarray");n[i]={value:r.value}}else{let a;r.buffer&&r.buffer instanceof WebGLBuffer?a=Pt:typeof r=="number"||typeof r.data=="number"?a=wt:a=zt;const{buffer:s,type:c,numValues:f,arrayType:u}=a(e,r,o),l=r.normalize!==void 0?r.normalize:Rt(u),A=Mt(r,o,f);n[i]={buffer:s,numComponents:A,type:c,normalize:l,stride:r.stride||0,offset:r.offset||0,divisor:r.divisor===void 0?void 0:r.divisor,drawType:r.drawType}}}}),e.bindBuffer(R,null),n}function kt(e,t){return t===xt||t===vt?1:t===ht||t===bt?2:t===It||t===Nt||t===Ee?4:0}const k=["position","positions","a_position"];function $t(e,t){let n,o;for(o=0;o<k.length&&(n=k[o],!(n in t||(n=_e.attribPrefix+n,n in t)));++o);o===k.length&&(n=Object.keys(t)[0]);const r=t[n];if(!r.buffer)return 1;e.bindBuffer(R,r.buffer);const i=e.getBufferParameter(R,St);e.bindBuffer(R,null);const a=kt(e,r.type),s=i/a,c=r.numComponents||r.size,f=s/c;if(f%1!==0)throw new Error(`numComponents ${c} not correct for length ${length}`);return f}function he(e,t,n){const o=Ot(e,t),r=Object.assign({},n||{});r.attribs=Object.assign({},n?n.attribs:{},o);const i=t.indices;if(i){const a=ve(i,"indices");r.indices=Se(e,a,_t),r.numElements=a.length,r.elementType=de(a)}else r.numElements||(r.numElements=$t(e,r.attribs));return r}function X(e){return!!e.texStorage2D}const Vt=function(){const e={},t={};function n(o){const r=o.constructor.name;if(!e[r]){for(const i in o)if(typeof o[i]=="number"){const a=t[o[i]];t[o[i]]=a?`${a} | ${i}`:i}e[r]=!0}}return function(r,i){return n(r),t[i]||(typeof i=="number"?`0x${i.toString(16)}`:i)}}(),Gt=6406,ie=6407,se=6408,gt=6409,Ht=6410,Wt=6402,Yt=34041,Kt=33319,jt=33320,Xt=6403,qt=36244,Jt=36248,Zt=36249,Qt={};{const e=Qt;e[Gt]={numColorComponents:1},e[gt]={numColorComponents:1},e[Ht]={numColorComponents:2},e[ie]={numColorComponents:3},e[se]={numColorComponents:4},e[Xt]={numColorComponents:1},e[qt]={numColorComponents:1},e[Kt]={numColorComponents:2},e[jt]={numColorComponents:2},e[ie]={numColorComponents:3},e[Jt]={numColorComponents:3},e[se]={numColorComponents:4},e[Zt]={numColorComponents:4},e[Wt]={numColorComponents:1},e[Yt]={numColorComponents:2}}const q=pt;function be(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const U=33984,L=34962,en=34963,tn=35713,nn=35714,rn=35632,on=35633,sn=35981,Ie=35718,an=35721,cn=35971,fn=35382,un=35396,ln=35398,mn=35392,dn=35395,M=5126,Ne=35664,Fe=35665,Re=35666,J=5124,Ce=35667,Be=35668,Ue=35669,Le=35670,Me=35671,De=35672,Pe=35673,we=35674,ze=35675,Oe=35676,An=35678,yn=35680,Tn=35679,pn=35682,En=35685,_n=35686,Sn=35687,xn=35688,vn=35689,hn=35690,bn=36289,In=36292,Nn=36293,Z=5125,ke=36294,$e=36295,Ve=36296,Fn=36298,Rn=36299,Cn=36300,Bn=36303,Un=36306,Ln=36307,Mn=36308,Dn=36311,D=3553,P=34067,Q=32879,w=35866,m={};function Ge(e,t){return m[t].bindPoint}function Pn(e,t){return function(n){e.uniform1f(t,n)}}function wn(e,t){return function(n){e.uniform1fv(t,n)}}function zn(e,t){return function(n){e.uniform2fv(t,n)}}function On(e,t){return function(n){e.uniform3fv(t,n)}}function kn(e,t){return function(n){e.uniform4fv(t,n)}}function ge(e,t){return function(n){e.uniform1i(t,n)}}function He(e,t){return function(n){e.uniform1iv(t,n)}}function We(e,t){return function(n){e.uniform2iv(t,n)}}function Ye(e,t){return function(n){e.uniform3iv(t,n)}}function Ke(e,t){return function(n){e.uniform4iv(t,n)}}function $n(e,t){return function(n){e.uniform1ui(t,n)}}function Vn(e,t){return function(n){e.uniform1uiv(t,n)}}function Gn(e,t){return function(n){e.uniform2uiv(t,n)}}function gn(e,t){return function(n){e.uniform3uiv(t,n)}}function Hn(e,t){return function(n){e.uniform4uiv(t,n)}}function Wn(e,t){return function(n){e.uniformMatrix2fv(t,!1,n)}}function Yn(e,t){return function(n){e.uniformMatrix3fv(t,!1,n)}}function Kn(e,t){return function(n){e.uniformMatrix4fv(t,!1,n)}}function jn(e,t){return function(n){e.uniformMatrix2x3fv(t,!1,n)}}function Xn(e,t){return function(n){e.uniformMatrix3x2fv(t,!1,n)}}function qn(e,t){return function(n){e.uniformMatrix2x4fv(t,!1,n)}}function Jn(e,t){return function(n){e.uniformMatrix4x2fv(t,!1,n)}}function Zn(e,t){return function(n){e.uniformMatrix3x4fv(t,!1,n)}}function Qn(e,t){return function(n){e.uniformMatrix4x3fv(t,!1,n)}}function x(e,t,n,o){const r=Ge(e,t);return X(e)?function(i){let a,s;!i||Te(e,i)?(a=i,s=null):(a=i.texture,s=i.sampler),e.uniform1i(o,n),e.activeTexture(U+n),e.bindTexture(r,a),e.bindSampler(n,s)}:function(i){e.uniform1i(o,n),e.activeTexture(U+n),e.bindTexture(r,i)}}function v(e,t,n,o,r){const i=Ge(e,t),a=new Int32Array(r);for(let s=0;s<r;++s)a[s]=n+s;return X(e)?function(s){e.uniform1iv(o,a),s.forEach(function(c,f){e.activeTexture(U+a[f]);let u,l;!c||Te(e,c)?(u=c,l=null):(u=c.texture,l=c.sampler),e.bindSampler(n,l),e.bindTexture(i,u)})}:function(s){e.uniform1iv(o,a),s.forEach(function(c,f){e.activeTexture(U+a[f]),e.bindTexture(i,c)})}}m[M]={Type:Float32Array,size:4,setter:Pn,arraySetter:wn};m[Ne]={Type:Float32Array,size:8,setter:zn,cols:2};m[Fe]={Type:Float32Array,size:12,setter:On,cols:3};m[Re]={Type:Float32Array,size:16,setter:kn,cols:4};m[J]={Type:Int32Array,size:4,setter:ge,arraySetter:He};m[Ce]={Type:Int32Array,size:8,setter:We,cols:2};m[Be]={Type:Int32Array,size:12,setter:Ye,cols:3};m[Ue]={Type:Int32Array,size:16,setter:Ke,cols:4};m[Z]={Type:Uint32Array,size:4,setter:$n,arraySetter:Vn};m[ke]={Type:Uint32Array,size:8,setter:Gn,cols:2};m[$e]={Type:Uint32Array,size:12,setter:gn,cols:3};m[Ve]={Type:Uint32Array,size:16,setter:Hn,cols:4};m[Le]={Type:Uint32Array,size:4,setter:ge,arraySetter:He};m[Me]={Type:Uint32Array,size:8,setter:We,cols:2};m[De]={Type:Uint32Array,size:12,setter:Ye,cols:3};m[Pe]={Type:Uint32Array,size:16,setter:Ke,cols:4};m[we]={Type:Float32Array,size:32,setter:Wn,rows:2,cols:2};m[ze]={Type:Float32Array,size:48,setter:Yn,rows:3,cols:3};m[Oe]={Type:Float32Array,size:64,setter:Kn,rows:4,cols:4};m[En]={Type:Float32Array,size:32,setter:jn,rows:2,cols:3};m[_n]={Type:Float32Array,size:32,setter:qn,rows:2,cols:4};m[Sn]={Type:Float32Array,size:48,setter:Xn,rows:3,cols:2};m[xn]={Type:Float32Array,size:48,setter:Zn,rows:3,cols:4};m[vn]={Type:Float32Array,size:64,setter:Jn,rows:4,cols:2};m[hn]={Type:Float32Array,size:64,setter:Qn,rows:4,cols:3};m[An]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:D};m[yn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:P};m[Tn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:Q};m[pn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:D};m[bn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:w};m[In]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:w};m[Nn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:P};m[Fn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:D};m[Rn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:Q};m[Cn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:P};m[Bn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:w};m[Un]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:D};m[Ln]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:Q};m[Mn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:P};m[Dn]={Type:null,size:0,setter:x,arraySetter:v,bindPoint:w};function z(e,t){return function(n){if(n.value)switch(e.disableVertexAttribArray(t),n.value.length){case 4:e.vertexAttrib4fv(t,n.value);break;case 3:e.vertexAttrib3fv(t,n.value);break;case 2:e.vertexAttrib2fv(t,n.value);break;case 1:e.vertexAttrib1fv(t,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(L,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,n.numComponents||n.size,n.type||M,n.normalize||!1,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function F(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4iv(t,n.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(L,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||J,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function O(e,t){return function(n){if(n.value)if(e.disableVertexAttribArray(t),n.value.length===4)e.vertexAttrib4uiv(t,n.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(L,n.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,n.numComponents||n.size,n.type||Z,n.stride||0,n.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,n.divisor||0)}}function ee(e,t,n){const o=n.size,r=n.count;return function(i){e.bindBuffer(L,i.buffer);const a=i.size||i.numComponents||o,s=a/r,c=i.type||M,u=m[c].size*a,l=i.normalize||!1,A=i.offset||0,d=u/r;for(let T=0;T<r;++T)e.enableVertexAttribArray(t+T),e.vertexAttribPointer(t+T,s,c,l,u,A+d*T),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+T,i.divisor||0)}}const S={};S[M]={size:4,setter:z};S[Ne]={size:8,setter:z};S[Fe]={size:12,setter:z};S[Re]={size:16,setter:z};S[J]={size:4,setter:F};S[Ce]={size:8,setter:F};S[Be]={size:12,setter:F};S[Ue]={size:16,setter:F};S[Z]={size:4,setter:O};S[ke]={size:8,setter:O};S[$e]={size:12,setter:O};S[Ve]={size:16,setter:O};S[Le]={size:4,setter:F};S[Me]={size:8,setter:F};S[De]={size:12,setter:F};S[Pe]={size:16,setter:F};S[we]={size:4,setter:ee,count:2};S[ze]={size:9,setter:ee,count:3};S[Oe]={size:16,setter:ee,count:4};const er=/ERROR:\s*\d+:(\d+)/gi;function tr(e,t="",n=0){const o=[...t.matchAll(er)],r=new Map(o.map((i,a)=>{const s=parseInt(i[1]),c=o[a+1],f=c?c.index:t.length,u=t.substring(i.index,f);return[s-1,u]}));return e.split(`
`).map((i,a)=>{const s=r.get(a);return`${a+1+n}: ${i}${s?`

^^^ ${s}`:""}`}).join(`
`)}const ae=/^[ \t]*\n/;function je(e){let t=0;return ae.test(e)&&(t=1,e=e.replace(ae,"")),{lineOffset:t,shaderSource:e}}function nr(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function rr(e,t,n,o){if(o=o||q,!e.getShaderParameter(n,tn)){const i=e.getShaderInfoLog(n),{lineOffset:a,shaderSource:s}=je(e.getShaderSource(n)),c=`${tr(s,i,a)}
Error compiling ${Vt(e,t)}: ${i}`;return o(c),c}return""}function te(e,t,n){let o,r,i;if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function")n=e,e=void 0;else if(e&&!Array.isArray(e)){const f=e;n=f.errorCallback,e=f.attribLocations,o=f.transformFeedbackVaryings,r=f.transformFeedbackMode,i=f.callback}const a=n||q,s=[],c={errorCallback(f,...u){s.push(f),a(f,...u)},transformFeedbackVaryings:o,transformFeedbackMode:r,callback:i,errors:s};{let f={};Array.isArray(e)?e.forEach(function(u,l){f[u]=t?t[l]:l}):f=e||{},c.attribLocations=f}return c}const or=["VERTEX_SHADER","FRAGMENT_SHADER"];function ir(e,t){if(t.indexOf("frag")>=0)return rn;if(t.indexOf("vert")>=0)return on}function sr(e,t,n){const o=e.getAttachedShaders(t);for(const r of o)n.has(r)&&e.deleteShader(r);e.deleteProgram(t)}const ar=(e=0)=>new Promise(t=>setTimeout(t,e));function cr(e,t,n){const o=e.createProgram(),{attribLocations:r,transformFeedbackVaryings:i,transformFeedbackMode:a}=te(n);for(let s=0;s<t.length;++s){let c=t[s];if(typeof c=="string"){const f=be(c),u=f?f.text:c;let l=e[or[s]];f&&f.type&&(l=ir(e,f.type)||l),c=e.createShader(l),e.shaderSource(c,je(u).shaderSource),e.compileShader(c),e.attachShader(o,c)}}Object.entries(r).forEach(([s,c])=>e.bindAttribLocation(o,c,s));{let s=i;s&&(s.attribs&&(s=s.attribs),Array.isArray(s)||(s=Object.keys(s)),e.transformFeedbackVaryings(o,s,a||sn))}return e.linkProgram(o),o}function fr(e,t,n,o,r){const i=te(n,o,r),a=new Set(t),s=cr(e,t,i);function c(f,u){const l=lr(f,u,i.errorCallback);return l&&sr(f,u,a),l}if(i.callback){ur(e,s).then(()=>{const f=c(e,s);i.callback(f,f?void 0:s)});return}return c(e,s)?void 0:s}async function ur(e,t){const n=e.getExtension("KHR_parallel_shader_compile"),o=n?(i,a)=>i.getProgramParameter(a,n.COMPLETION_STATUS_KHR):()=>!0;let r=0;do await ar(r),r=1e3/60;while(!o(e,t))}function lr(e,t,n){if(n=n||q,!e.getProgramParameter(t,nn)){const r=e.getProgramInfoLog(t);n(`Error in program linking: ${r}`);const a=e.getAttachedShaders(t).map(s=>rr(e,e.getShaderParameter(s,e.SHADER_TYPE),s,n));return`${r}
${a.filter(s=>s).join(`
`)}`}}function mr(e,t,n,o,r){return fr(e,t,n,o,r)}function Xe(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}const dr=/(\.|\[|]|\w+)/g,Ar=e=>e>="0"&&e<="9";function yr(e,t,n,o){const r=e.split(dr).filter(s=>s!=="");let i=0,a="";for(;;){const s=r[i++];a+=s;const c=Ar(s[0]),f=c?parseInt(s):s;if(c&&(a+=r[i++]),i===r.length){n[f]=t;break}else{const l=r[i++],A=l==="[",d=n[f]||(A?[]:{});n[f]=d,n=d,o[a]=o[a]||function(T){return function(h){qe(T,h)}}(d),a+=l}}}function Tr(e,t){let n=0;function o(s,c,f){const u=c.name.endsWith("[0]"),l=c.type,A=m[l];if(!A)throw new Error(`unknown type: 0x${l.toString(16)}`);let d;if(A.bindPoint){const T=n;n+=c.size,u?d=A.arraySetter(e,l,T,f,c.size):d=A.setter(e,l,T,f,c.size)}else A.arraySetter&&u?d=A.arraySetter(e,f):d=A.setter(e,f);return d.location=f,d}const r={},i={},a=e.getProgramParameter(t,Ie);for(let s=0;s<a;++s){const c=e.getActiveUniform(t,s);if(Xe(c))continue;let f=c.name;f.endsWith("[0]")&&(f=f.substr(0,f.length-3));const u=e.getUniformLocation(t,c.name);if(u){const l=o(t,c,u);r[f]=l,yr(f,l,i,r)}}return r}function pr(e,t){const n={},o=e.getProgramParameter(t,cn);for(let r=0;r<o;++r){const i=e.getTransformFeedbackVarying(t,r);n[i.name]={index:r,type:i.type,size:i.size}}return n}function Er(e,t){const n=e.getProgramParameter(t,Ie),o=[],r=[];for(let s=0;s<n;++s){r.push(s),o.push({});const c=e.getActiveUniform(t,s);o[s].name=c.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(s){const c=s[0],f=s[1];e.getActiveUniforms(t,r,e[c]).forEach(function(u,l){o[l][f]=u})});const i={},a=e.getProgramParameter(t,fn);for(let s=0;s<a;++s){const c=e.getActiveUniformBlockName(t,s),f={index:e.getUniformBlockIndex(t,c),usedByVertexShader:e.getActiveUniformBlockParameter(t,s,un),usedByFragmentShader:e.getActiveUniformBlockParameter(t,s,ln),size:e.getActiveUniformBlockParameter(t,s,mn),uniformIndices:e.getActiveUniformBlockParameter(t,s,dn)};f.used=f.usedByVertexShader||f.usedByFragmentShader,i[c]=f}return{blockSpecs:i,uniformData:o}}function qe(e,t){for(const n in t){const o=e[n];typeof o=="function"?o(t[n]):qe(e[n],t[n])}}function ne(e,...t){const n=e.uniformSetters||e,o=t.length;for(let r=0;r<o;++r){const i=t[r];if(Array.isArray(i)){const a=i.length;for(let s=0;s<a;++s)ne(n,i[s])}else for(const a in i){const s=n[a];s&&s(i[a])}}}function _r(e,t){const n={},o=e.getProgramParameter(t,an);for(let r=0;r<o;++r){const i=e.getActiveAttrib(t,r);if(Xe(i))continue;const a=e.getAttribLocation(t,i.name),s=S[i.type],c=s.setter(e,a,s);c.location=a,n[i.name]=c}return n}function Sr(e,t){for(const n in t){const o=e[n];o&&o(t[n])}}function Je(e,t,n){n.vertexArrayObject?e.bindVertexArray(n.vertexArrayObject):(Sr(t.attribSetters||t,n.attribs),n.indices&&e.bindBuffer(en,n.indices))}function ce(e,t){const n=Tr(e,t),o=_r(e,t),r={program:t,uniformSetters:n,attribSetters:o};return X(e)&&(r.uniformBlockSpec=Er(e,t),r.transformFeedbackInfo=pr(e,t)),r}const xr=/\s|{|}|;/;function Ze(e,t,n,o,r){const i=te(n,o,r),a=[];if(t=t.map(function(f){if(!xr.test(f)){const u=be(f);if(u)f=u.text;else{const l=`no element with id: ${f}`;i.errorCallback(l),a.push(l)}}return f}),a.length)return nr(i,"");const s=i.callback;s&&(i.callback=(f,u)=>{s(f,f?void 0:ce(e,u))});const c=mr(e,t,i);return c?ce(e,c):null}const vr=4,fe=5123;function Qe(e,t,n,o,r,i){n=n===void 0?vr:n;const a=t.indices,s=t.elementType,c=o===void 0?t.numElements:o;r=r===void 0?0:r,s||a?i!==void 0?e.drawElementsInstanced(n,c,s===void 0?fe:t.elementType,r,i):e.drawElements(n,c,s===void 0?fe:t.elementType,r):i!==void 0?e.drawArraysInstanced(n,r,c,i):e.drawArrays(n,r,c)}function et(e,t){t=t||1,t=Math.max(0,t);const n=e.clientWidth*t|0,o=e.clientHeight*t|0;return e.width!==n||e.height!==o?(e.width=n,e.height=o,!0):!1}function tt(e){e.width=window.innerWidth,e.height=window.innerHeight;const t=e.getContext("webgl2");if(t)console.log("WebGL initialized successfully");else throw alert("WebGL not supported"),Error("WebGL not supported");return t}function hr(e){const t=document.createElement("canvas");e.innerHTML="",e.append(t);const n=tt(t);var o=Ze(n,[it,st]);const r={a_position:{numComponents:2,data:new Float32Array([-1,-1,1,-1,1,1,-1,1])},a_colour:{numComponents:3,data:new Float32Array([1,0,0,0,1,0,0,0,1,1,1,1])},indices:{numComponents:3,data:new Uint16Array([0,1,3,1,2,3])}},i=he(n,r);function a(s){et(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.DEPTH_TEST);const c={u_time:s};n.useProgram(o.program),Je(n,o,i),ne(o,c),Qe(n,i),requestAnimationFrame(a)}requestAnimationFrame(a)}var br=`#version 300 es

in vec4 a_position;
in vec4 a_colour;

uniform mat4 u_matrix;

out vec4 v_colour;

void main() {
  gl_Position = u_matrix * a_position;
  v_colour = a_colour;
}`,Ir=`#version 300 es

precision highp float;

in vec4 v_colour;

out vec4 outColour;

void main() {
  outColour = v_colour;
}`,$=1e-6,ue=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function B(){var e=new ue(16);return ue!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Nr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function le(e,t,n){var o=t[0],r=t[1],i=t[2],a=t[3],s=t[4],c=t[5],f=t[6],u=t[7],l=t[8],A=t[9],d=t[10],T=t[11],h=t[12],b=t[13],I=t[14],N=t[15],y=n[0],p=n[1],E=n[2],_=n[3];return e[0]=y*o+p*s+E*l+_*h,e[1]=y*r+p*c+E*A+_*b,e[2]=y*i+p*f+E*d+_*I,e[3]=y*a+p*u+E*T+_*N,y=n[4],p=n[5],E=n[6],_=n[7],e[4]=y*o+p*s+E*l+_*h,e[5]=y*r+p*c+E*A+_*b,e[6]=y*i+p*f+E*d+_*I,e[7]=y*a+p*u+E*T+_*N,y=n[8],p=n[9],E=n[10],_=n[11],e[8]=y*o+p*s+E*l+_*h,e[9]=y*r+p*c+E*A+_*b,e[10]=y*i+p*f+E*d+_*I,e[11]=y*a+p*u+E*T+_*N,y=n[12],p=n[13],E=n[14],_=n[15],e[12]=y*o+p*s+E*l+_*h,e[13]=y*r+p*c+E*A+_*b,e[14]=y*i+p*f+E*d+_*I,e[15]=y*a+p*u+E*T+_*N,e}function Fr(e,t,n){var o=Math.sin(n),r=Math.cos(n),i=t[0],a=t[1],s=t[2],c=t[3],f=t[4],u=t[5],l=t[6],A=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r+f*o,e[1]=a*r+u*o,e[2]=s*r+l*o,e[3]=c*r+A*o,e[4]=f*r-i*o,e[5]=u*r-a*o,e[6]=l*r-s*o,e[7]=A*r-c*o,e}function Rr(e,t){var n=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Cr(e,t,n,o,r){var i=1/Math.tan(t/2),a;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,r!=null&&r!==1/0?(a=1/(o-r),e[10]=(r+o)*a,e[14]=2*r*o*a):(e[10]=-1,e[14]=-2*o),e}var Br=Cr;function Ur(e,t,n,o){var r,i,a,s,c,f,u,l,A,d,T=t[0],h=t[1],b=t[2],I=o[0],N=o[1],y=o[2],p=n[0],E=n[1],_=n[2];return Math.abs(T-p)<$&&Math.abs(h-E)<$&&Math.abs(b-_)<$?Nr(e):(u=T-p,l=h-E,A=b-_,d=1/Math.hypot(u,l,A),u*=d,l*=d,A*=d,r=N*A-y*l,i=y*u-I*A,a=I*l-N*u,d=Math.hypot(r,i,a),d?(d=1/d,r*=d,i*=d,a*=d):(r=0,i=0,a=0),s=l*a-A*i,c=A*r-u*a,f=u*i-l*r,d=Math.hypot(s,c,f),d?(d=1/d,s*=d,c*=d,f*=d):(s=0,c=0,f=0),e[0]=r,e[1]=s,e[2]=u,e[3]=0,e[4]=i,e[5]=c,e[6]=l,e[7]=0,e[8]=a,e[9]=f,e[10]=A,e[11]=0,e[12]=-(r*T+i*h+a*b),e[13]=-(s*T+c*h+f*b),e[14]=-(u*T+l*h+A*b),e[15]=1,e)}function Lr(e){const t=document.createElement("canvas");e.innerHTML="",e.append(t);const n=tt(t);var o=Ze(n,[br,Ir]);const r={a_position:{numComponents:3,data:new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1])},a_colour:{numComponents:3,data:new Float32Array([0,0,0,0,0,1,0,1,0,0,1,1,1,0,0,1,0,1,1,1,0,1,1,1])},indices:{numComponents:3,data:new Uint16Array([0,1,3,1,2,3,1,5,2,2,5,6,4,6,5,4,7,6,0,7,4,0,3,7,2,7,3,2,6,7,0,4,5,0,5,1])}},i=he(n,r);function a(s){et(n.canvas),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.DEPTH_TEST),n.enable(n.CULL_FACE);const c=Math.PI/4,f=t.clientWidth/t.clientHeight,u=.1,l=100,A=B();Br(A,c,f,u,l);const d=s/1e3,T=new Float32Array([6,0,6]),h=new Float32Array([0,0,0]),b=new Float32Array([0,1,0]),I=B();Ur(I,T,h,b);const N=B();Rr(N,-d),Fr(N,N,-d);const y=B();le(I,I,N),le(y,A,I);const p={u_matrix:y,u_time:s};n.useProgram(o.program),Je(n,o,i),ne(o,p),Qe(n,i),requestAnimationFrame(a)}requestAnimationFrame(a)}const nt=[{name:"main-menu",load:ot},{name:"example-1",load:hr},{name:"example-2",load:Lr}],Mr=document.getElementById("app");function Dr(){const e=localStorage.getItem("appState");return e?JSON.parse(e):null}const rt=Dr()??{state:"main-menu"};history.replaceState(rt,"");function re(e){const t=nt.find(n=>n.name===e.state);t&&(localStorage.setItem("appState",JSON.stringify({state:t.name})),t==null||t.load(Mr))}re(rt);window.addEventListener("popstate",e=>{console.log(e),re(e.state)});window.addEventListener("keydown",e=>{(e.key==="b"||e.key==="Escape")&&(localStorage.setItem("appState",JSON.stringify({state:"main-menu"})),re({state:"main-menu"}))});
